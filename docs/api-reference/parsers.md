---
layout: default
title: Parsers
parent: API Reference
nav_order: 1
---

# Parsers
{: .no_toc }

The parser classes in LuaTS are responsible for converting Lua/Luau code into an Abstract Syntax Tree (AST).
{: .fs-6 .fw-300 }

## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---

## LuaParser

The `LuaParser` class handles parsing standard Lua code into an AST.

### Usage

```typescript
import { LuaParser } from 'luats';
// or
import { LuaParser } from 'luats/parsers/lua';

const parser = new LuaParser();
const ast = parser.parse(`
  local function greet(name)
    return "Hello, " .. name
  end
`);

console.log(ast);
```

### Methods

| Method | Description |
| --- | --- |
| `constructor()` | Creates a new LuaParser instance. |
| `parse(code: string): AST.Program` | Parses Lua code and returns an AST. |

### Error Handling

The parser will throw a `ParseError` if it encounters invalid syntax:

```typescript
import { LuaParser, ParseError } from 'luats';

try {
  const parser = new LuaParser();
  const ast = parser.parse(`
    local function greet(name
      return "Hello, " .. name
    end
  `);
} catch (error) {
  if (error instanceof ParseError) {
    console.error(`Parse error at line ${error.line}, column ${error.column}: ${error.message}`);
  } else {
    throw error;
  }
}
```

## LuauParser

The `LuauParser` extends the basic parser to support Luau-specific features, including type annotations.

### Usage

```typescript
import { LuauParser } from 'luats';
// or
import { LuauParser } from 'luats/parsers/luau';

const parser = new LuauParser();
const ast = parser.parse(`
  type Person = {
    name: string,
    age: number
  }
  
  local function createPerson(name: string, age: number): Person
    return { name = name, age = age }
  end
`);

console.log(ast);
```

### Methods

| Method | Description |
| --- | --- |
| `constructor()` | Creates a new LuauParser instance. |
| `parse(code: string): AST.Program` | Parses Luau code and returns an AST. |

### Supported Luau Features

The `LuauParser` supports the following Luau-specific features:

- Type annotations for variables, function parameters, and return values
- Type aliases
- Interface declarations
- Table types with indexer syntax
- Function types
- Optional types (with `?` suffix)
- Union types
- Generic types
- Method declarations

## Convenience Functions

LuaTS also provides convenience functions for quick parsing:

```typescript
import { parseLua, parseLuau } from 'luats';

// Parse standard Lua
const luaAst = parseLua(`
  local x = 10
`);

// Parse Luau with type annotations
const luauAst = parseLuau(`
  local x: number = 10
`);
```

## AST Structure

The AST generated by the parsers follows a structure similar to the Lua/Luau language specification. 

See the [AST Types](./ast-types) documentation for detailed information on the structure.
